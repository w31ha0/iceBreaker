{"version":3,"file":"6.7ecdd40c094d3b6d1703.hot-update.js","sources":["webpack:///pages/leaderboard.js"],"sourcesContent":["import Page from \"../components/Page\";\r\nimport React from \"react\";\r\nimport Pusher from \"pusher-js\";\r\nimport credentials from \"../constants/credentials\";\r\nimport strings from \"../constants/strings\";\r\nimport Layout from '../components/Layout.js'\r\nimport gameUtils from '../utils/gameUtils'\r\n\r\nexport default class extends Page {\r\n\r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            completedUsers: []\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.setupPusher()\r\n        this.retrieveCompletedUsers()\r\n    }\r\n\r\n    retrieveCompletedUsers = () => {\r\n        gameUtils.getCompletedUsers().then((res) => {\r\n            const completedUsers = res.completedUsers\r\n            this.setState({\r\n                completedUsers: completedUsers\r\n            })\r\n        },function(failure){})\r\n    }\r\n\r\n    setupPusher = () => {\r\n        this.pusher = new Pusher(credentials.PUSHER_APP_KEY, {\r\n            cluster: credentials.PUSHER_APP_CLUSTER,\r\n            encrypted: true\r\n        });\r\n\r\n        this.channel = this.pusher.subscribe(strings.PUSHER_CHANNEL);\r\n\r\n        this.channel.bind(strings.PUSHER_USER_LIST_UPDATE_EVENT, (users) => {\r\n            console.log(\"Received users \"+JSON.stringify(users))\r\n            const completedUsers = users.completedUsers\r\n            console.log(\"Received new user list from Pusher: \" + JSON.stringify(completedUsers))\r\n            this.setState({\r\n                completedUsers: completedUsers\r\n            })\r\n        });\r\n\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <Layout>\r\n                <div id='players'>\r\n                    <label>Hall of Fame</label>\r\n                    <table className=\"table\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th scope=\"col\">Rank</th>\r\n                            <th scope=\"col\">Name</th>\r\n                            <th scope=\"col\">Deshu</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {this.state.completedUsers.map((user,index) => {\r\n                                return (<tr>\r\n                                            <th>{index-1}</th>\r\n                                            <th>{user.name}</th>\r\n                                            <th>{user.deshu}</th>\r\n                                        </tr>)\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <style jsx>{`\r\n                    #players {\r\n                        text-align: center;\r\n                    }\r\n                `}</style>\r\n            </Layout>\r\n        )\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// pages/leaderboard.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AAEA;AAtCA;AAEA;AACA;AADA;AAFA;AAKA;AACA;;;AACA;AACA;AACA;AACA;;;AA8BA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAlBA;AAAA;AAAA;AA6BA;;;;AAzEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}